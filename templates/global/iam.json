{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "IAM Setup v1.0",
  "Parameters": {},
  "Outputs": {
    "NATInstanceProfile": {
      "Value": {
        "Fn::GetAtt": [
          "Roles",
          "Outputs.NATInstanceProfile"
        ]
      }
    },
    "testAppInstanceProfile": {
      "Value": {
        "Fn::GetAtt": [
          "Roles",
          "Outputs.TestAppInstanceProfile"
        ]
      }
    }
  },
  "Resources": {
    "Users": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "Parameters": {
          "Environment": "global",
          "AdminGroup": {
            "Fn::GetAtt": [
              "Groups",
              "Outputs.AdminGroup"
            ]
          }
        },
        "TemplateURL": "https://s3.amazonaws.com/curbformation-global-templates/iam/users.json",
        "TimeoutInMinutes": "30"
      }
    },
    "Groups": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "Parameters": {
          "Environment": "global"
        },
        "TemplateURL": "https://s3.amazonaws.com/curbformation-global-templates/iam/groups.json",
        "TimeoutInMinutes": "30"
      }
    },
    "Roles": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "Parameters": {
          "Environment": "global"
        },
        "TemplateURL": "https://s3.amazonaws.com/curbformation-global-templates/iam/roles.json",
        "TimeoutInMinutes": "30"
      }
    }
  }
}
